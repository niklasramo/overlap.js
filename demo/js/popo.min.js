/*! popo.js v1.0 | http://github.com/niklasramo/popo.js | Copyright (c) 2012, 2013 Niklas Rämö | Released under the MIT license | */
(function(i,f){var j="popo",h=i.parseFloat,c=i.Math,q=c.abs,d,x,v,o;function l(z,y){z=({}).toString.call(z).split(" ")[1].replace("]","").toLowerCase();return y?z===y:z}function g(y){return l(y,"string")?(y.trim?y.trim():y.replace(/^\s+|\s+$/g,"")):y}function s(C){var A={},y=C.length,z,B;for(z=0;z<y;z++){for(B in C[z]){if(C[z].hasOwnProperty(B)){A[B]=C[z][B]}}}return A}function w(y){return y.self===d.self}function p(y,z){return d.getComputedStyle?(d.getComputedStyle(y,null).getPropertyValue(z)):y.currentStyle?(y.currentStyle[z]):(null)}function k(y){var z=y.offsetParent,A="style" in y&&p(y,"position");if(A==="fixed"){z=d}else{if(A==="absolute"){z=y===o?v:z||x;while("style" in z&&p(z,"position")==="static"){z=z===o?v:z.offsetParent||x}}}return z}function m(y,z){return w(y)?(v.clientWidth):y===x||y===v?(c.max(v.scrollWidth,o.scrollWidth)):(z=y.getBoundingClientRect&&y.getBoundingClientRect(),z&&"width" in z?z.width:y.offsetWidth)}function b(y,z){return w(y)?(v.clientHeight):y===x||y===v?(c.max(v.scrollHeight,o.scrollHeight)):(z=y.getBoundingClientRect&&y.getBoundingClientRect(),z&&"height" in z?z.height:y.offsetHeight)}function t(z,F){var B=0,y=0,C=d.pageXOffset||v.scrollLeft||o.scrollLeft||0,E=d.pageYOffset||v.scrollTop||o.scrollTop||0,A=z,D;if(w(z)){B=C;y=E}else{if(z!==x&&z!==v){D=z.getBoundingClientRect&&z.getBoundingClientRect();if(D&&"left" in D&&"top" in D){B+=D.left+C-(v.clientLeft||0);y+=D.top+E-(v.clientTop||0)}else{while(A){B+=w(A)?C:A.offsetLeft||0;y+=w(A)?E:A.offsetTop||0;A=k(A)}}if(F){B+=z.clientLeft||0;y+=z.clientTop||0}}}return{left:B,top:y}}function a(B){var E=t(B,1),z=[[p(B,"left"),p(B,"right")],[p(B,"top"),p(B,"bottom")]],y=[0,0],F,D,C,A;for(A=0;A<2;A++){D=z[A][0];C=z[A][1];if(D==="auto"&&C==="auto"){continue}if(D==="auto"){y[A]=-parseFloat(C.indexOf("px")>-1?C:B.style[A===0?"pixelRight":"pixelBottom"])}else{y[A]=parseFloat(D.indexOf("px")>-1?D:B.style[A===0?"pixelLeft":"pixelTop"])}}E.left-=y[0];E.top-=y[1];return E}function n(C,B){var z=i[j].defaults,E,A,D,y;B=s(l(B,"object")?[z,B]:[z]);for(E in B){B[E]=g(l(B[E],"function")&&E!=="collision"?B[E](C):B[E]);if(E==="position"){B[E]=B[E].split(" ")}if(E==="offset"){A=l(B[E],"string")?B[E].split(" "):[];B.offsetX=h(A[0])||0;B.offsetY=A.length>1?h(A[1])||0:B.offsetX}if(E==="collision"){A=l(B[E],"function")?B[E]:null;if(l(B[E],"string")&&B[E].length>0){D=B[E].split(" ");y=D.length;if(y>0&&y<5){A={left:D[0],top:y>1?D[1]:D[0],right:y>2?D[2]:D[0],bottom:y>3?D[3]:y<2?D[0]:D[1]}}}B[E]=A}}return B}function r(F,E,C,D,B,A){var y={},z=E+D-C;y.leftleft=y.toptop=z;y.leftcenter=y.topcenter=z+(B/2);y.leftright=y.topbottom=z+B;y.centerleft=y.centertop=z-(A/2);y.centercenter=z+(B/2)-(A/2);y.centerright=y.centerbottom=z+B-(A/2);y.rightleft=y.bottomtop=z-A;y.rightcenter=y.bottomcenter=z-A+(B/2);y.rightright=y.bottombottom=z-A+B;return y[F]}function e(J,K,C){var G=0,H="push",F="push+",z=C?"top":"left",y=C?"bottom":"right",I=J[z],A=J[y],E=K[z],D=K[y],B=E+D;if((I===H||I===F)&&(A===H||A===F)&&(E<0||D<0)){if(E<D){G-=B<0?E+q(B/2):E}if(D<E){G+=B<0?D+q(B/2):D}E+=G;D-=G;if(I===F&&A!=F&&E<0){G-=E}if(A===F&&I!=F&&D<0){G+=D}}else{if((I===F||I===H)&&E<0){G-=E}else{if((A===F||A===H)&&D<0){G+=D}}}return G}function u(A,B,D){x=A.ownerDocument;d=x.defaultView||x.parentWindow;v=x.documentElement;o=x.body;D=n(A,l(B,"string")?D:B);var G=D.collision,H=m(A),I=b(A),C=p(A,"position")==="relative"?a(A):t(k(A),1),y=D.base,P,E,O,z=D.container,M,N,F,Q,L,J,K;l(y,"array")?(P=E=0,O=t(y[2]||d),O.left+=y[0],O.top+=y[1]):(P=m(y),E=b(y),O=t(y));K={left:r(D.position[0]+D.position[2],O.left,C.left,D.offsetX,P,H),top:r(D.position[1]+D.position[3],O.top,C.top,D.offsetY,E,I)};if(z){l(z,"array")?(M=N=0,F=t(z[2]||d),F.left+=z[0],F.top+=z[1]):(M=m(z),N=b(z),F=t(z));J={left:K.left+C.left-F.left,right:(F.left+M)-(K.left+C.left+H),top:K.top+C.top-F.top,bottom:(F.top+N)-(K.top+C.top+I)};if(l(G,"function")){Q=t(A);L={left:Q.left>C.left?q(Q.left-C.left):-q(Q.left-C.left),top:Q.top>C.top?q(Q.top-C.top):-q(Q.top-C.top)};G(K,J,{target:{element:A,width:H,height:I,offset:Q,position:L},base:{element:y,width:P,height:E,offset:O},container:{element:z,width:M,height:N,offset:F}})}else{if(G){K.left+=e(G,J);K.top+=e(G,J,1)}}}if(B==="get"){return K}else{A.style.left=K.left+"px";A.style.top=K.top+"px";return A}}i[j]=u;i[j].defaults={base:function(y){return y.ownerDocument.defaultView||y.ownerDocument.parentWindow},container:null,position:"center center center center",offset:"0",collision:"none"}})(self);