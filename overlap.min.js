/*! overlap.js v0.1.1dev | http://github.com/niklasramo/overlap.js | Copyright (c) 2013 Niklas Rämö | Released under the MIT license */
(function(f,e){var d,s,o,h;function k(t){s=t.ownerDocument;d=s.defaultView||s.parentWindow;o=s.documentElement;h=s.body}function p(t){return t.self===d.self}function c(t,u){return d.getComputedStyle?(d.getComputedStyle(t,null).getPropertyValue(u)):t.currentStyle?(t.currentStyle[u]):(null)}function i(t){var u=t.offsetParent,v="style" in t&&c(t,"position");if(v==="fixed"){u=d}else{if(v==="absolute"){u=t===h?o:u||s;while("style" in u&&c(u,"position")==="static"){u=u===h?o:u.offsetParent||s}}}return u}function a(t,u){return p(t)?(o.clientWidth):t===s||t===o?(math.max(o.scrollWidth,h.scrollWidth)):(u=t.getBoundingClientRect&&t.getBoundingClientRect(),u&&"width" in u?u.width:t.offsetWidth)}function j(t,u){return p(t)?(o.clientHeight):t===s||t===o?(math.max(o.scrollHeight,h.scrollHeight)):(u=t.getBoundingClientRect&&t.getBoundingClientRect(),u&&"height" in u?u.height:t.offsetHeight)}function b(u,A){var w=0,t=0,x=d.pageXOffset||o.scrollLeft||h.scrollLeft||0,z=d.pageYOffset||o.scrollTop||h.scrollTop||0,v=u,y;if(p(u)){w=x;t=z}else{if(u!==s&&u!==o){y=u.getBoundingClientRect&&u.getBoundingClientRect();if(y&&"left" in y&&"top" in y){w+=y.left+x-(o.clientLeft||0);t+=y.top+z-(o.clientTop||0)}else{while(v){w+=p(v)?x:v.offsetLeft||0;t+=p(v)?z:v.offsetTop||0;v=i(v)}}if(A){w+=u.clientLeft||0;t+=u.clientTop||0}}}return{left:w,top:t}}function n(t){return{element:t.element||t,width:t.width||a(t),height:t.height||j(t),offset:t.offset||b(t,1)}}function g(u,t){return{left:u.offset.left-t.offset.left,right:(t.offset.left+t.width)-(u.offset.left+u.width),top:u.offset.top-t.offset.top,bottom:(t.offset.top+t.height)-(u.offset.top+u.height)}}function l(v,u,t){var w={width:v.width+(t.left<0?t.left:0)+(t.right<0?t.right:0),height:v.height+(t.top<0?t.top:0)+(t.bottom<0?t.bottom:0),offset:{left:null,top:null},coverage:{player:0,target:0,total:0}};w.width=w.width<0?0:w.width;w.height=w.height<0?0:w.height;if(w.width>0&&w.height>0){w.offset.left=v.offset.left+Math.abs(t.left<0?t.left:0);w.offset.top=v.offset.top+Math.abs(t.top<0?t.top:0);w.coverage.player=((w.width*w.height)/(v.width*v.height))*100;w.coverage.target=((w.width*w.height)/(u.width*u.height))*100;w.coverage.total=w.coverage.player+w.coverage.target}return w}function q(x,v){var w=n(v),u=g(x,w),t=l(x,w,u);w.overlap=u;w.intersection=t;return w}function m(u,t){return -(u.intersection.coverage.total-t.intersection.coverage.total)}function r(v,t,x){k(v);var z=n(v),t=t instanceof Array?t:[t],y=t.length,A={player:z,targets:[],hits:[]},w,u;for(u=0;u<y;u++){w=q(z,t[u]);A.targets.push(w);if(w.intersection.coverage.total>0){A.hits.push(w)}}A.hits.sort(m);return x?A:(A.hits.length?true:false)}f.overlap=f.overlap||r})(self);